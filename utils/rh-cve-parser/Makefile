create_req_file:
	pip freeze > requirements.txt
build_container:
	docker build -t phiroict/rh_cve_parser_aro:20230208.0 -f infra/local/Dockerfile .
tag_push_container:
	# Since there is no way to get the credentials for this as that would spoil the fun for the support we need to replace this later on. 
	docker tag phiroict/rh_cve_parser_aro:20230208.0 default-route-openshift-image-registry.apps-crc.testing/phiroict/rh_cve_parser_aro:20230208.0
	docker push default-route-openshift-image-registry.apps-crc.testing/phiroict/rh_cve_parser_aro:20230208.0
run_container:
	-mkdir -p result_container
	docker run -v ./result_container:/src/result -ti phiroict/rh_cve_parser_aro:20230208.0
create_ns:
	cd infra/openshift && oc create namespace cves --dry-run=client -o yaml > ns.yaml
create_cron:
	cd infra/openshift && oc create cronjob cve-parser --image phiroict/rh_cve_parser_aro:20230208.0  --schedule "*/1 * * * * " -n cves --dry-run -o yaml > cron.yaml
build_oc_stack:
	cd infra/openshift && oc apply -f ns.yaml
	cd infra/openshift && oc apply -f limitrange.yaml
	cd infra/openshift && oc apply -f cron.yaml